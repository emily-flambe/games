<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium Web Games Online Incorporated LLC Esq. GPT CBD</title>
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <link rel="shortcut icon" type="image/png" href="/static/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div id="app">
        <header>
            <h1 class="company-name">Premium Web Games Online Incorporated LLC Esq. GPT CBD</h1>
        </header>
        
        <main>
            <!-- Game Portal View -->
            <div id="game-portal" class="view active">
                <h2>Select a Game</h2>
                <div class="games-grid">
                    <button class="game-card" data-game="checkbox-game">
                        <h3>Checkbox Game</h3>
                        <p>Not really a game lol</p>
                    </button>
                    <button class="game-card" data-game="votes-game">
                        <h3>Everybody Votes</h3>
                        <p>Remember that game on Wii channel? Wasn't it fun? I miss it</p>
                        <div class="coming-soon-badge">WIP</div>
                    </button>
                    <button class="game-card coming-soon" data-game="paddlin-game">
                        <h3>That's a Paddlin'</h3>
                        <p>N-way pong with paddles around a shared arena</p>
                        <div class="coming-soon-badge">Coming soon maybe lol</div>
                    </button>
                    <button class="game-card coming-soon" data-game="bracketeering-game">
                        <h3>Bracketeering</h3>
                        <p>Tournament-style voting on head-to-head matchups</p>
                        <div class="coming-soon-badge">Coming soon maybe lol</div>
                    </button>
                    <button class="game-card coming-soon" data-game="price-game">
                        <h3>The Price is Weird</h3>
                        <p>Guess prices of real Etsy products without going over</p>
                        <div class="coming-soon-badge">Coming soon maybe lol</div>
                    </button>
                </div>
                
                <div class="join-room-section">
                    <h3>Join Existing Room</h3>
                    
                    <div class="join-layout">
                        <div class="manual-join-section">
                            <div class="join-method">
                                <h4>Enter Room Code</h4>
                                <div class="manual-join">
                                    <input type="text" id="room-code-input" placeholder="ENTER CODE">
                                    <button id="join-room-btn">Join Room</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="active-rooms">
                            <div class="active-rooms-header">
                                <h4>Active Rooms</h4>
                                <button id="refresh-rooms-btn" class="refresh-btn" title="Refresh active rooms list">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                                        <path d="M1 4v6h6"></path>
                                        <path d="M23 20v-6h-6"></path>
                                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10"></path>
                                        <path d="M3.51 15A9 9 0 0 0 18.36 18.36L23 14"></path>
                                    </svg>
                                </button>
                            </div>
                            <div id="active-rooms-list" class="rooms-list">
                                <div class="loading-rooms">Loading rooms...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Game Room View -->
            <div id="game-room" class="view">
                <div class="room-header">
                    <div class="header-left">
                        <div class="rules-box" id="rules-box" style="display: none;">
                            <h3>How to Play</h3>
                            <div id="game-rules-content">
                                <!-- Game-specific rules will be populated here -->
                            </div>
                        </div>
                    </div>
                    <div class="header-right">
                        <div class="room-info">
                            <h2 id="game-title">Game Room</h2>
                            <div class="room-code">Room: <span id="room-code-display"></span></div>
                        </div>
                        <button id="leave-room-btn">Leave Room</button>
                    </div>
                </div>
                
                <!-- Combined Waiting Room Container -->
                <div class="waiting-room-container" style="background: white; border: 2px solid #e0e0e0; border-radius: 12px; padding: 25px; margin: 20px 0; display: flex; gap: 40px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <!-- Players List Section (Left) -->
                    <div class="players-list" style="flex: 1; min-width: 200px;">
                        <div class="players-header" style="margin-bottom: 15px;">
                            <h3 style="margin: 0; color: #333;">Players</h3>
                            <button id="start-game-btn-header">Start Game</button>
                        </div>
                        <div id="players-container" style="background: #f8f9fa; border-radius: 8px; padding: 10px; min-height: 120px;"></div>
                    </div>
                    
                    <!-- Player Identity Section (Right) -->
                    <div id="player-controls" class="player-controls" style="flex: 1; min-width: 300px; border-left: 2px solid #e0e0e0; padding-left: 30px;">
                        <div class="player-info-container">
                            <h3 style="margin: 0 0 20px 0; color: #333;">Who Are You?</h3>
                            <div class="player-info" style="display: flex; flex-direction: column; gap: 18px;">
                                <div class="name-control responsive-name-control">
                                    <label class="name-label" style="font-weight: 600; min-width: 55px; color: #555;">Name:</label>
                                    <div class="name-input-group">
                                        <input type="text" id="player-name-input" placeholder="Enter your name" maxlength="20" class="name-input">
                                        <button id="update-name-btn" class="update-btn" onmouseover="this.style.background='#0056b3'" onmouseout="this.style.background='#007bff'">Update</button>
                                    </div>
                                </div>
                                <div class="emoji-control" style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
                                    <label style="font-weight: 600; min-width: 55px; color: #555;">Avatar:</label>
                                    <button id="current-emoji-btn" style="padding: 10px 16px; background: white; border: 2px solid #007bff; border-radius: 6px; cursor: pointer; font-size: 28px; transition: all 0.2s; min-width: 60px;" onmouseover="this.style.background='#e3f2fd'; this.style.transform='scale(1.05)'" onmouseout="this.style.background='white'; this.style.transform='scale(1)'">üê∂</button>
                                    <span style="color: #888; font-size: 13px;">Click to change</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Emoji Picker Popup (Outside container to avoid overflow issues) -->
                <div id="emoji-picker" style="display: none; position: fixed; background: white; border: 2px solid #007bff; border-radius: 10px; padding: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); z-index: 99999; width: 340px;">
                    <h4 style="margin: 0 0 12px 0; color: #333; font-size: 16px; border-bottom: 1px solid #e0e0e0; padding-bottom: 8px;">Choose Your Avatar</h4>
                    <div id="emoji-grid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 6px; max-height: 280px; overflow-y: auto; padding: 5px;">
                        <!-- Animal emojis will be populated by JavaScript -->
                    </div>
                </div>
                
                <!-- Game Area - Where all game modules render -->
                <div id="game-area" class="game-area" style="display: none;">
                    <!-- Game modules will be injected here dynamically -->
                </div>
                
                <!-- Chat Area - For in-game communication -->
                <div id="chat-area" class="chat-area" style="display: none;">
                    <div class="chat-header">
                        <h3>üí¨ Game Chat</h3>
                    </div>
                    <div class="chat-main-container">
                        <div class="chat-messages-section">
                            <div class="chat-messages" id="chat-messages">
                                <!-- Chat messages will appear here -->
                            </div>
                            <div class="chat-input-area">
                                <input type="text" id="chat-input" placeholder="Type a message...">
                                <button id="chat-send-btn">Send</button>
                            </div>
                        </div>
                        <div class="chat-users-panel">
                            <div class="chat-users-list" id="chat-users-list">
                                <!-- Player and spectator list will appear here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Universal End Game Screen -->
                <div id="end-game-screen" class="end-game-screen" style="display: none;">
                    <div class="end-game-content">
                        <h2 id="game-result-message">Game Over!</h2>
                        <div id="final-scores" class="final-scores">
                            <!-- Final scores will be populated by JavaScript -->
                        </div>
                        <button id="ok-btn" class="ok-btn">OK</button>
                    </div>
                </div>
                
                <div class="game-controls">
                    <button id="start-game-btn" style="display: none;">Start Game</button>
                    <button id="restart-game-btn" style="display: none;">Restart Game</button>
                </div>
            </div>
        </main>
        
        <!-- Loading overlay -->
        <div id="loading-overlay" class="overlay" style="display: none;">
            <div class="spinner"></div>
            <p>Connecting...</p>
        </div>
        
        <!-- Error messages -->
        <div id="error-container" class="error-container"></div>
    </div>
    
    <!-- Version Info -->
    <footer class="version-info">
        <div id="version-display">Loading version...</div>
    </footer>
    
    <!-- Game Shell Architecture -->
    <script src="/static/js/GameModule.js"></script>
    <script src="/static/js/games/CheckboxGameModule.js"></script>
    <script src="/static/js/games/ThatsAPaddlinGameModule.js"></script>
    <script src="/static/js/games/EverybodyVotesGameModule.js"></script>
    <script src="/static/js/games/BracketeeringGameModule.js"></script>
    <script src="/static/js/games/PriceIsWeirdGameModule.js"></script>
    <script src="/static/js/GameShell.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>