#!/bin/sh

# Conventional Commits validation hook
# This script validates that commit messages follow conventional commit format

commit_regex='^(feat|fix|docs|style|refactor|perf|test|build|ci|chore)(\(.+\))?(!)?: .{1,50}'

error_msg="‚ùå INVALID COMMIT MESSAGE FORMAT!

Your commit message must follow Conventional Commits format:
<type>: <description>

Valid types: feat, fix, docs, style, refactor, perf, test, build, ci, chore
Add '!' for breaking changes: feat!: breaking change

Examples:
‚úÖ feat: add dark mode toggle
‚úÖ fix: repair WebSocket connection  
‚úÖ docs: update README
‚úÖ feat!: redesign game API

‚ùå Your message: $(cat $1)

üìñ Read VERSIONING.md for complete guide!"

if ! grep -qE "$commit_regex" "$1"; then
    echo "$error_msg" >&2
    exit 1
fi