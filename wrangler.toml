name = "games"
main = "src/index.ts"
compatibility_date = "2024-12-30"
workers_dev = true
preview_urls = true
account_id = "facf6619808dc039df729531bbb26d1d"

# Custom domain
[[routes]]
pattern = "games.emilycogsdill.com"
custom_domain = true

[dev]
port = 8777

# Durable Objects
[[durable_objects.bindings]]
name = "GAME_SESSIONS"
class_name = "GameSession"

[[durable_objects.bindings]]
name = "GAME_REGISTRY"
class_name = "GameSessionRegistry"

# Durable Object Migrations
[[migrations]]
tag = "v1"
new_classes = [ "GameSession" ]

[[migrations]]
tag = "v2"
new_classes = [ "GameSessionRegistry" ]

[[migrations]]
tag = "v3"
new_classes = [ "CheckboxGameSession", "EverybodyVotesGameSession" ]

[[migrations]]
tag = "v4"
new_classes = [ "CountyGameSession" ]

# Note: Legacy DO classes (CheckboxGameSession, EverybodyVotesGameSession, CountyGameSession)
# are kept registered for migration history but are no longer used.
# All games now use the unified GameSession with handler registry.
